<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zero-filling data • naturecounts</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Zero-filling data">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">naturecounts</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/BirdStudiesCanada/naturecounts">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Zero-filling data</h1>
            
            <h4 class="date">2019-07-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/BirdStudiesCanada/naturecounts/blob/master/vignettes/format-zero-fill.Rmd"><code>vignettes/format-zero-fill.Rmd</code></a></small>
      <div class="hidden name"><code>format-zero-fill.Rmd</code></div>

    </div>

    
    
<p>After downloading population data, many analyses require that you have records not only of when/where species <em>were</em> detected, but also where they <em>were not</em> detected. While NatureCounts generally contains records of species presence, we can infer species absence when a species was not detected in a Sampling Event (unique <code>SamplingEventIdentifier</code>), provided that all species were reported for that Sampling Event (i.e. that <code>AllSpeciesReported</code> is “Yes”).</p>
<p>To make things simpler, we have included the <code><a href="../reference/format_zero_fill.html">format_zero_fill()</a></code> function.</p>
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h2>
<div id="packages" class="section level3">
<h3 class="hasAnchor">
<a href="#packages" class="anchor"></a>Packages</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(naturecounts)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggmap)</a></code></pre></div>
</div>
<div id="download-data" class="section level3">
<h3 class="hasAnchor">
<a href="#download-data" class="anchor"></a>Download data</h3>
<p>We’ll use the ‘core’ version of BMDE fields so that we include <code>CommonName</code> for convenience.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">rc &lt;-<span class="st"> </span><span class="kw"><a href="../reference/nc_data_dl.html">nc_data_dl</a></span>(<span class="dt">collections =</span> <span class="st">"RCBIOTABASE"</span>, <span class="dt">fields_set =</span> <span class="st">"core"</span>,</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">                 <span class="dt">species =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">252456</span>, <span class="dv">252494</span>, <span class="dv">252491</span>),</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">                 <span class="dt">username =</span> <span class="st">"sample"</span>)</a></code></pre></div>
<pre><code>## Using filters: collections (RCBIOTABASE); species (252456, 252494, 252491); fields_set (BMDE2.00)</code></pre>
<pre><code>## Collecting available records...</code></pre>
<pre><code>##   access  collection nrecords
## 1    yes RCBIOTABASE      349
## Total records: 349</code></pre>
<pre><code>## 
## Downloading records for each collection:</code></pre>
<pre><code>##   RCBIOTABASE</code></pre>
<pre><code>##     Records 1 to 349 / 349</code></pre>
</div>
<div id="initial-exploration" class="section level3">
<h3 class="hasAnchor">
<a href="#initial-exploration" class="anchor"></a>Initial Exploration</h3>
<p>Let’s take a look at the butterfly species observations we have</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(rc, CommonName)</a></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   CommonName            n
##   &lt;chr&gt;             &lt;int&gt;
## 1 Black Swallowtail    40
## 2 Monarch             215
## 3 Red Admiral          94</code></pre>
<p>How many sampling events?</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(rc, SamplingEventIdentifier)</a></code></pre></div>
<pre><code>## # A tibble: 131 x 2
##    SamplingEventIdentifier     n
##    &lt;chr&gt;                   &lt;int&gt;
##  1 &lt;NA&gt;                      176
##  2 RCBIOTABASE-10008-1         1
##  3 RCBIOTABASE-10015-1         1
##  4 RCBIOTABASE-10030-1         1
##  5 RCBIOTABASE-10068-1         1
##  6 RCBIOTABASE-10070-1         1
##  7 RCBIOTABASE-10087-1         1
##  8 RCBIOTABASE-10093-1         2
##  9 RCBIOTABASE-10097-1         1
## 10 RCBIOTABASE-10104-1         1
## # … with 121 more rows</code></pre>
<p>Lot’s of sampling events too. But some are missing (<code>NA</code>).</p>
<p>Were all species reported?</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(rc, AllSpeciesReported)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   AllSpeciesReported     n
##   &lt;chr&gt;              &lt;int&gt;
## 1 No                   176
## 2 Yes                  173</code></pre>
<p>Sometimes, but not all the time.</p>
<p>Finally, let’s take a peak at the observations recorded for these three species</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="dt">data =</span> rc, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> CommonName, <span class="dt">y =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(ObservationCount))) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">title =</span> <span class="st">"Number of individuals observed"</span>)</a></code></pre></div>
<p><img src="format-zero-fill_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="dt">data =</span> rc, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> CommonName)) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">title =</span> <span class="st">"Number of sampling events the species was observed"</span>)</a></code></pre></div>
<p><img src="format-zero-fill_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>To better understand these populations, it would be helpful to know not only when these species were observed, but also when they were not.</p>
</div>
</div>
<div id="zero-filling" class="section level2">
<h2 class="hasAnchor">
<a href="#zero-filling" class="anchor"></a>Zero-Filling</h2>
<p>Because zero-filling requires that all species are reported (how can you know if a species was or was not observed, if it wasn’t reported?), <code>format_zero_fill</code> will return an error if some of the records are not valid.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">rc_filled &lt;-<span class="st"> </span><span class="kw"><a href="../reference/format_zero_fill.html">format_zero_fill</a></span>(rc)</a></code></pre></div>
<pre><code>## Error: Column 'AllSpeciesReported' must be present and 'Yes'</code></pre>
<p>Therefore, the first thing we need to do is limit our data to only <code>SamplingEventIdentifiers</code> where all species were recorded.</p>
<p><strong>Note</strong> that <code>AllSpeciesReported</code> may not always be strictly true, as bird identification events (e.g., Christmas Bird Counts) may report all <em>bird</em> species, but would probably not report all mammalian species, plants, etc. and vice versa.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">rc_all_species &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(rc, AllSpeciesReported <span class="op">==</span><span class="st"> "Yes"</span>)</a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(rc_all_species, AllSpeciesReported)</a></code></pre></div>
<pre><code>## # A tibble: 1 x 2
##   AllSpeciesReported     n
##   &lt;chr&gt;              &lt;int&gt;
## 1 Yes                  173</code></pre>
<p>Now we can fill in all species missing from other sampling events.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">rc_filled &lt;-<span class="st"> </span><span class="kw"><a href="../reference/format_zero_fill.html">format_zero_fill</a></span>(rc_all_species)</a></code></pre></div>
<pre><code>##  - Converted 'fill' column (ObservationCount) from character to numeric</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(rc_filled)</a></code></pre></div>
<pre><code>##   SamplingEventIdentifier species_id ObservationCount
## 1     RCBIOTABASE-10008-1     252456                1
## 2     RCBIOTABASE-10008-1     252491                0
## 3     RCBIOTABASE-10008-1     252494                0
## 4     RCBIOTABASE-10015-1     252456                2
## 5     RCBIOTABASE-10015-1     252491                0
## 6     RCBIOTABASE-10015-1     252494                0</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="dt">data =</span> rc_filled, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(species_id), <span class="dt">fill =</span> ObservationCount <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span>(<span class="dt">position =</span> <span class="st">"dodge"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">title =</span> <span class="st">"Number of sampling events the species was observed"</span>)</a></code></pre></div>
<p><img src="format-zero-fill_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>It might be more helpful to use common names, but through the process of zero-filling, extra columns have been removed.</p>
</div>
<div id="keep-other-important-columns" class="section level2">
<h2 class="hasAnchor">
<a href="#keep-other-important-columns" class="anchor"></a>Keep other important columns</h2>
<p>To keep other columns associated with species id, specify them with the <code>extra_species</code> argument.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">rc_filled &lt;-<span class="st"> </span><span class="kw"><a href="../reference/format_zero_fill.html">format_zero_fill</a></span>(rc_all_species, </a>
<a class="sourceLine" id="cb26-2" data-line-number="2">                              <span class="dt">extra_species =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"CommonName"</span>, <span class="st">"ScientificName"</span>))</a></code></pre></div>
<pre><code>##  - Converted 'fill' column (ObservationCount) from character to numeric</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(rc_filled)</a></code></pre></div>
<pre><code>##   SamplingEventIdentifier species_id ObservationCount        CommonName
## 1     RCBIOTABASE-10008-1     252456                1           Monarch
## 2     RCBIOTABASE-10008-1     252491                0       Red Admiral
## 3     RCBIOTABASE-10008-1     252494                0 Black Swallowtail
## 4     RCBIOTABASE-10015-1     252456                2           Monarch
## 5     RCBIOTABASE-10015-1     252491                0       Red Admiral
## 6     RCBIOTABASE-10015-1     252494                0 Black Swallowtail
##      ScientificName
## 1  Danaus plexippus
## 2  Vanessa atalanta
## 3 Papilio polyxenes
## 4  Danaus plexippus
## 5  Vanessa atalanta
## 6 Papilio polyxenes</code></pre>
<p>To keep other columns associated with the sampling event, specify them, in addition to the sampling event id, in the <code>by</code> argument. By default, <code>SamplingEventIdentifier</code> is used to identify specific sampling events.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">rc_filled &lt;-<span class="st"> </span><span class="kw"><a href="../reference/format_zero_fill.html">format_zero_fill</a></span>(rc_all_species, </a>
<a class="sourceLine" id="cb30-2" data-line-number="2">                              <span class="dt">by =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"SamplingEventIdentifier"</span>, <span class="st">"latitude"</span>, <span class="st">"longitude"</span>),</a>
<a class="sourceLine" id="cb30-3" data-line-number="3">                              <span class="dt">extra_species =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"CommonName"</span>, <span class="st">"ScientificName"</span>))</a></code></pre></div>
<pre><code>##  - Converted 'fill' column (ObservationCount) from character to numeric</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(rc_filled)</a></code></pre></div>
<pre><code>##   SamplingEventIdentifier latitude longitude species_id ObservationCount
## 1     RCBIOTABASE-10008-1  45.5111 -77.50533     252456                1
## 2     RCBIOTABASE-10008-1  45.5111 -77.50533     252491                0
## 3     RCBIOTABASE-10008-1  45.5111 -77.50533     252494                0
## 4     RCBIOTABASE-10015-1  45.5111 -77.50533     252456                2
## 5     RCBIOTABASE-10015-1  45.5111 -77.50533     252491                0
## 6     RCBIOTABASE-10015-1  45.5111 -77.50533     252494                0
##          CommonName    ScientificName
## 1           Monarch  Danaus plexippus
## 2       Red Admiral  Vanessa atalanta
## 3 Black Swallowtail Papilio polyxenes
## 4           Monarch  Danaus plexippus
## 5       Red Admiral  Vanessa atalanta
## 6 Black Swallowtail Papilio polyxenes</code></pre>
</div>
<div id="zero-filling-by-other-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#zero-filling-by-other-variables" class="anchor"></a>Zero-filling <code>by</code> other variables</h2>
<p>Sampling events aren’t the only way of zero-filling data. Perhaps you’re only interested in whether a species has/has not been observed in a particular location.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">rc_loc_filled &lt;-<span class="st"> </span><span class="kw"><a href="../reference/format_zero_fill.html">format_zero_fill</a></span>(rc_all_species, </a>
<a class="sourceLine" id="cb34-2" data-line-number="2">                                  <span class="dt">by =</span> <span class="st">"utm_square"</span>)</a></code></pre></div>
<pre><code>##  - Consider summarizing multiple observations per set of 'by' before zero-filling to increase speed</code></pre>
<pre><code>##  - Converted 'fill' column (ObservationCount) from character to numeric</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(rc_loc_filled)</a></code></pre></div>
<pre><code>##   utm_square species_id ObservationCount
## 1    18TTR94     252456                1
## 2    18TTR94     252491                0
## 3    18TTR94     252494                0
## 4    18TUR04     252456                1
## 5    18TUR04     252456                1
## 6    18TUR04     252456                1</code></pre>
<p>The message about summarizing multiple observations means that we have multiple observations per <code>utm_square</code>. This example isn’t large enough to be slowed down much, but in larger examples, it can be much faster to simplify the dataset first.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">rc_sum &lt;-<span class="st"> </span>rc_all_species <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(utm_square, species_id, AllSpeciesReported) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb39-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(<span class="dt">ObservationCount =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(ObservationCount), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb39-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(rc_sum)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 4
## # Groups:   utm_square, species_id [6]
##   utm_square species_id AllSpeciesReported ObservationCount
##   &lt;chr&gt;           &lt;int&gt; &lt;chr&gt;                         &lt;dbl&gt;
## 1 18TTR94        252456 Yes                               1
## 2 18TUR04        252456 Yes                              67
## 3 18TUR04        252491 Yes                              46
## 4 18TUR04        252494 Yes                              22
## 5 18TUR17        252456 Yes                               1
## 6 18TUR27        252491 Yes                               1</code></pre>
<p>Now if we zero-fill this data set, we get a zero-filled, aggregated dataset.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1">rc_sum_filled &lt;-<span class="st"> </span><span class="kw"><a href="../reference/format_zero_fill.html">format_zero_fill</a></span>(rc_sum, <span class="dt">by =</span> <span class="st">"utm_square"</span>)</a>
<a class="sourceLine" id="cb41-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(rc_sum_filled)</a></code></pre></div>
<pre><code>##   utm_square species_id ObservationCount
## 1    18TTR94     252456                1
## 2    18TTR94     252491                0
## 3    18TTR94     252494                0
## 4    18TUR04     252456               67
## 5    18TUR04     252491               46
## 6    18TUR04     252494               22</code></pre>
</div>
<div id="filling-specific-species" class="section level2">
<h2 class="hasAnchor">
<a href="#filling-specific-species" class="anchor"></a>Filling specific species</h2>
<p>Up to now in these examples we’ve been filling all the species present in the data, but often you might be only interested in one or two species. We can specify which species with the <code>species</code> argument.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">rc_sp_filled &lt;-<span class="st"> </span><span class="kw"><a href="../reference/format_zero_fill.html">format_zero_fill</a></span>(rc_all_species, <span class="dt">species =</span> <span class="st">"252456"</span>)</a></code></pre></div>
<pre><code>##  - Converted 'fill' column (ObservationCount) from character to numeric</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(rc_sp_filled)</a></code></pre></div>
<pre><code>##   SamplingEventIdentifier species_id ObservationCount
## 1     RCBIOTABASE-10008-1     252456                1
## 2     RCBIOTABASE-10015-1     252456                2
## 3     RCBIOTABASE-10030-1     252456                0
## 4     RCBIOTABASE-10068-1     252456                0
## 5     RCBIOTABASE-10070-1     252456                2
## 6     RCBIOTABASE-10087-1     252456                0</code></pre>
</div>
<div id="filling-other-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#filling-other-variables" class="anchor"></a>Filling other variables</h2>
<p>By default <code><a href="../reference/format_zero_fill.html">format_zero_fill()</a></code> adds 0’s to the <code>ObservationCount</code> column, but you can specify any column to zero fill.</p>
<p>For example, if you wanted to deal only with Presence/Absence you could create a new <code>presence</code> column and zero-fill this column.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">rc_presence &lt;-<span class="st"> </span>rc_all_species <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(species_id, AllSpeciesReported, ObservationCount, SamplingEventIdentifier) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">presence =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(ObservationCount) <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>))</a>
<a class="sourceLine" id="cb47-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(rc_presence)</a></code></pre></div>
<pre><code>##   species_id AllSpeciesReported ObservationCount SamplingEventIdentifier
## 1     252456                Yes                6      RCBIOTABASE-5553-1
## 2     252491                Yes                1      RCBIOTABASE-5553-1
## 3     252456                Yes                2      RCBIOTABASE-5547-1
## 4     252456                Yes                1      RCBIOTABASE-5546-1
## 5     252494                Yes                1      RCBIOTABASE-6235-1
## 6     252491                Yes                3      RCBIOTABASE-5545-1
##   presence
## 1     TRUE
## 2     TRUE
## 3     TRUE
## 4     TRUE
## 5     TRUE
## 6     TRUE</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1">rc_presence_filled &lt;-<span class="st"> </span><span class="kw"><a href="../reference/format_zero_fill.html">format_zero_fill</a></span>(rc_presence, <span class="dt">fill =</span> <span class="st">"presence"</span>)</a></code></pre></div>
<pre><code>##  - Converted 'fill' column (presence) from logical to numeric</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(rc_presence_filled)</a></code></pre></div>
<pre><code>##   SamplingEventIdentifier species_id presence
## 1     RCBIOTABASE-10008-1     252456        1
## 2     RCBIOTABASE-10008-1     252491        0
## 3     RCBIOTABASE-10008-1     252494        0
## 4     RCBIOTABASE-10015-1     252456        1
## 5     RCBIOTABASE-10015-1     252491        0
## 6     RCBIOTABASE-10015-1     252494        0</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#setup">Setup</a></li>
      <li><a href="#zero-filling">Zero-Filling</a></li>
      <li><a href="#keep-other-important-columns">Keep other important columns</a></li>
      <li><a href="#zero-filling-by-other-variables">Zero-filling <code>by</code> other variables</a></li>
      <li><a href="#filling-specific-species">Filling specific species</a></li>
      <li><a href="#filling-other-variables">Filling other variables</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Steffi LaZerte, Denis LePage.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
