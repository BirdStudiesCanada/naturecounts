% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/download.R
\name{nc_data_dl}
\alias{nc_data_dl}
\title{Download NatureCounts data records}
\usage{
nc_data_dl(collections = NULL, species = NULL, start_year = NULL,
  end_year = NULL, start_season = NULL, end_season = NULL,
  location = NULL, country = NULL, statprov = NULL,
  subnational2 = NULL, fields_set = "minimum", fields = NULL,
  token = NULL, sql_db = NULL, verbose = TRUE)
}
\arguments{
\item{collections}{Character vector. The collection codes from which to
download data. NULL (default) downloads data from all available collections}

\item{species}{Numeric vector. Numeric species ids (see details)}

\item{start_year}{Numeric. The starting year of data to download}

\item{end_year}{Numeric. The ending year of data to download}

\item{start_season}{Character/Numeric. The start of the season to download
(day of year 1-366 or a date that can be converted to day of year)}

\item{end_season}{Character/Numeric. The start of the season to download
(day of year 1-366 or a date that can be converted to day of year)}

\item{location}{NOT IMPLEMENTED}

\item{country}{Character vector. Filter data to specific countries codes}

\item{statprov}{Character vector. Filter data to specific states/province
codes}

\item{fields_set}{Charcter. Set of fields/columns to download. See details.}

\item{fields}{Character vector. If \code{fields_set = custom}, which
fields/columns to download. See details}

\item{token}{Character vector. Authorization token, otherwise only public
data is accessible}

\item{sql_db}{Character vector. Name and location of SQLite database to
either create or add to}

\item{verbose}{Logical. Display progress messages?}
}
\value{
Data frame
}
\description{
Download data records from various collections filtered by date and location
(if provided). An authorization token is required.
}
\details{
\strong{Species ids:}
Numeric species id codes can determined from the functions
\code{\link{species_search}()} or \code{\link{species_code_search}()}.

\strong{Dates:}
The format of start/end dates is fairly flexible and can be anything
recognized by \code{\link[lubridate]{lubridate-package}}'s
\code{\link[lubridate]{ymd}()} function. However, it must have the
order of year, month, day. Year is ignored when converting to julian days
for defining seasons.

\strong{Data Fields/Columns:}
By default data is downloaded with the \code{minimum} set of fields/columns.
However, for more advanced applications, users may wish to specify which
fields/columns to return. The Bird Monitoring Data Exchange (BMDE) schema
keeps track of variables used to augment observation data. There are
different versions reflecting different collections of variables which can
be specified for download in one of four ways:
\enumerate{
\item \code{fields_set} can be a specific shorthand reflecting a BMDE version:
\code{core}, \code{extended} or \code{minimum} (default). See \code{\link[=bmde_versions]{bmde_versions()}} to see
which BMDE version the shorthand refers to.
\item \code{fields_set} can be \code{default} which uses the default BMDE version for a
particular collection (note that if you download more than one collection,
the field sets will expand to cover all fields/columns in the combined
collections)
\item \code{fields_set} can be the exact BMDE version. See \code{\link[=bmde_versions]{bmde_versions()}} for
options.
\item \code{fields_set} can be \code{custom} and the \code{fields} argument can be a
character vector specifying the exact fields/columns to return. See
\code{\link[=bmde_fields]{bmde_fields()}}) for \code{fields} options
}

Note that in all cases there are a set of fields/columns that are \emph{always}
returned, no matter what \code{fields_set} is used.
}
\examples{
\donttest{# All observations part of the RCBIOTABASE collection
rcbio <- nc_data_dl(collection = "RCBIOTABASE")}

# Observations of black-capped chickadees from RCBIOTABASE collection in 2010
species_search("black-capped chickadee") # Find the species_id
bcch <- nc_data_dl(collection = "RCBIOTABASE", species = 14280,
                   start_date = 2010, end_date = 2010)

# All moose observations with public access
species_search("moose")
moose <- nc_data_dl(species = 133990)

# Different fields/columns
moose <- nc_data_dl(species = 133990, fields_set = "core")

moose <- nc_data_dl(species = 133990, fields_set = "custom",
                    fields = c("Locality", "AllSpeciesReported"))

}
